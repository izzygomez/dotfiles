- defaults:
    link:
      relink: true

- clean: ["~"]

- link:
    # Some usage notes (see [1] for more details):
    # - "if: <condition>" will only link the file if the condition is true
    # - "create: true" creates parent directories if they don't already exist
    # - "force: true" overwrites the target file if it already exists
    # [1] https://github.com/anishathalye/dotbot/blob/master/README.md

    ### Only link these files on macOS
    ~/.alfred:
      if: "[ `uname` = Darwin ]"
      create: true
      force: true
      path: alfred
    ~/.config/karabiner:
      if: "[ `uname` = Darwin ]"
      create: true
      force: true
      path: macOS-keyboard-shortcuts/karabiner
    ~/.rectangle.config.json:
      if: "[ `uname` = Darwin ]"
      path: rectangle.config.json
    # Cursor stuff
    # these files are stored as .jsonc in this repo since they contain comments.
    # Cursor expects .json filenames but parses them as JSONC under the hood,
    # so the .json -> .jsonc symlinks work just fine.
    ~/Library/Application Support/Cursor/User/keybindings.json:
      if: "[ `uname` = Darwin ]"
      path: cursor/keybindings.jsonc
    ~/Library/Application Support/Cursor/User/settings.json:
      if: "[ `uname` = Darwin ]"
      path: cursor/settings.jsonc
    # Firefox stuff
    ~/Library/Application Support/Firefox/izzys-firefox-profile/chrome:
      if: "[ `uname` = Darwin ]"
      create: true
      path: firefox/chrome
    ~/Library/Application Support/Firefox/izzys-firefox-profile/user.js:
      if: "[ `uname` = Darwin ]"
      create: true
      path: firefox/user.js
    ~/Library/Application Support/Firefox/profiles.ini:
      if: "[ `uname` = Darwin ]"
      create: true
      force: true
      path: firefox/profiles.ini
    ~/Library/KeyBindings/DefaultKeyBinding.dict:
      if: "[ `uname` = Darwin ]"
      create: true
      path: macOS-keyboard-shortcuts/DefaultKeyBinding.dict

    ### Files that are OS-independent
    ~/.claude/keybindings.json:
      create: false # don't force-create dir if it doesn't exist
      force: true
      path: claude/keybindings.json
    ~/.config/eza:
      create: true
      force: true
      path: eza
    ~/.config/graphite/user_config:
      create: true
      force: true
      path: graphite/user_config
    ~/.config/graphite/aliases:
      create: true
      force: true
      path: graphite/aliases
    ~/.config/tmux-powerline: tmux/tmux-powerline
    # Symlink to this repo itself
    ~/dotfiles: ""
    ~/.emacs.d/init.el:
      create: true
      path: emacs/init.el
    ~/.gitconfig: gitconfig
    ~/.gitignore-global: gitignore-global
    ~/.hushlogin: hushlogin
    ~/.lesskey: lesskey
    ~/.npmrc: npmrc
    ~/.p10k.zsh: zsh/p10k.zsh
    ~/.tidyrc: tidyrc
    ~/.tmux.conf: tmux/tmux.conf
    ~/.zprofile: zsh/zprofile
    ~/.zshrc: zsh/zshrc

- shell:
    - [git submodule update --init --recursive, Installing submodules]
